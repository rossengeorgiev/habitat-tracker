var e=this;function g(a,d){var c=a.split("."),b=e;!(c[0]in b)&&b.execScript&&b.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&void 0!==d?b[f]=d:b=b[f]?b[f]:b[f]={}}Math.floor(2147483648*Math.random()).toString(36);function i(a,d){function c(){}c.prototype=d.prototype;a.i=d.prototype;a.prototype=new c};var j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(a,d){for(var c,b,f=1;f<arguments.length;f++){b=arguments[f];for(c in b)a[c]=b[c];for(var h=0;h<j.length;h++)c=j[h],Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}};function l(a,d){var c={center:new google.maps.LatLng(52,0.5),zoom:8,mapTypeId:google.maps.MapTypeId.ROADMAP};k(c,d||{});google.maps.Map.call(this,a,c)}i(l,google.maps.Map);g("habitat.tracker.Map",l);l.prototype.c=function(a){var d=Math.pow(2,this.getZoom()),c=this.getProjection(),b=this.getBounds(),b=c.fromLatLngToPoint(new google.maps.LatLng(b.getNorthEast().lat(),b.getSouthWest().lng())),a=c.fromLatLngToPoint(a);return new google.maps.Point(Math.floor((a.x-b.x)*d),Math.floor((a.y-b.y)*d))};
l.prototype.fromLatLngToPixel=l.prototype.c;l.prototype.d=function(a){var d=Math.pow(2,this.getZoom()),c=this.getProjection(),b=this.getBounds(),b=c.fromLatLngToPoint(new google.maps.LatLng(b.getNorthEast().lat(),b.getSouthWest().lng())),a=new google.maps.Point(a.x/d+b.x,a.y/d+b.y);return c.fromPointToLatLng(a)};l.prototype.fromPixelToLatLng=l.prototype.d;function m(a){var d={optimized:!1,altitude:0,h:null,shadow:{url:"images/markers/shadow.png",anchor:new google.maps.Point(n.width/2,n.height/2),scaledSize:n}};k(d,a||{});google.maps.Marker.call(this,d)}i(m,google.maps.Marker);g("habitat.tracker.BalloonMarker",m);var n=new google.maps.Size(24,16);m.prototype.f=function(a){this.set("altitude",a)};m.prototype.setAltitude=m.prototype.f;m.prototype.g=function(a){this.set("image",a)};m.prototype.setImage=m.prototype.g;
m.prototype.e=function(){function a(a,b){c.a=new google.maps.Size(a/2,b/2);c.setIcon({url:d,anchor:new google.maps.Point(c.a.width/2,c.a.height+p(c)),scaledSize:c.a})}var d=this.get("image"),c=this,b=new Image;b.src=d;b.onload=function(){void 0!=a&&null!=a&&a(b.width,b.height)}};m.prototype.image_changed=m.prototype.e;m.prototype.b=function(){void 0==this.a||null==this.a||(this.get("altitude"),this.getIcon().anchor=new google.maps.Point(this.a.width/2,this.a.height+p(this)))};
m.prototype.altitude_changed=m.prototype.b;function p(a){var d=a.get("altitude");return Math.round(d/(1E3/3)*(a.getMap().getZoom()/18))};
